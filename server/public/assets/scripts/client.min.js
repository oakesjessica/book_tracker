var app=angular.module("bookApp",["ngRoute"]);app.config(["$routeProvider","$locationProvider",function(a,b){a.when("/login",{templateUrl:"views/login.html",controller:"LoginController",controllerAs:"log"}).when("/register",{templateUrl:"views/register.html",controller:"RegisterController",controllerAs:"reg"}).when("/search",{templateUrl:"views/search.html",controller:"SearchController",controllerAs:"add"}).when("/library",{templateUrl:"views/library.html",controller:"LibraryController",controllerAs:"lib"}).when("/shelves",{templateUrl:"views/shelves.html",controller:"ShelvesController",controllerAs:"shelf"}).when("/locations",{templateUrl:"views/locations.html",controller:"LocationController",controllerAs:"loc"}).when("/borrowed",{templateUrl:"views/borrowed.html",controller:"BorrowController",controllerAs:"brw"}).when("/lent",{templateUrl:"views/lent.html",controller:"LentController",controllerAs:"lent"}).when("/favorites",{templateUrl:"views/favorites.html",controller:"FavoriteController",controllerAs:"fav"}).when("/wishlist",{templateUrl:"views/wishlist.html",controller:"WishController",controllerAs:"wish"}).when("/faq",{templateUrl:"views/faq.html",controller:"FaqController",controllerAs:"faq"}),b.html5Mode(!0)}]),app.controller("MainController",["UserService",function(a){var b=this;b.loginStatusData=a.data,console.log(b.loginStatus)}]),app.controller("LoginController",["UserService",function(a){var b=this;b.logInfo={},b.login=function(){console.log(b.logInfo),a.loginUser(b.logInfo)}}]),app.controller("RegisterController",["UserService",function(a){var b=this;b.newUser={},b.regUser=function(){console.log(b.newUser),a.registerNewUser(b.newUser),b.newUser={}}}]),app.controller("SearchController",function(){var a=this;a.page_title="Search List"}),app.controller("LibraryController",["BookService",function(a){var b=this;b.page_title="Library List",b.libraryList=a.data,a.getLibrary(),console.log("lib",b.libraryList)}]),app.controller("ShelvesController",function(){var a=this;a.page_title="Shelf List"}),app.controller("LocationController",function(){var a=this;a.page_title="Locations List"}),app.controller("BorrowController",["BookService",function(a){var b=this;b.page_title="Books I've Borrowed",b.borrowingList=a.borrowLentData,a.getBorrowedList(),console.log("brw",b.borrowingList)}]),app.controller("LentController",["BookService",function(a){var b=this;b.page_title="Books I've Lent Out",b.lendingList=a.borrowLentData,a.getLentList(),console.log("lend",b.lendingList)}]),app.controller("FavoriteController",["BookService",function(a){var b=this;b.page_title="Favorites List",b.favoritesList=a.data,a.getFavoritesList(),console.log("favcontroller",b.favoritesList)}]),app.controller("WishController",["BookService",function(a){var b=this;b.page_title="Wish List",b.wishList=a.data,a.getWishlist(),console.log("wishcontroller",b.wishList),b.removeWish=function(a){console.log(a)}}]),app.controller("FaqController",function(){var a=this;a.page_title="FAQ List"}),app.factory("UserService",["$http","$location",function(a,b){var c=[],d={};return registerNewUser=function(b){console.log("newuser",b),a.post("/register",b).then(function(a){console.log(a)})},loginUser=function(c){console.log("logging in",c),a.post("/",c).then(function(a){console.log(a),200===a.status?(d.login=!0,b.path("/search")):d.login=!1})},{key:{title:"value"},userData:c,registerNewUser:registerNewUser,loginUser:loginUser,data:d}}]),app.factory("BookService",["$http",function(a){var b=[],c=[],d=function(){a.get("/library").then(function(a){console.log(a.data),angular.copy(a.data,b)})},e=function(){a.get("/wishlist").then(function(a){angular.copy(a.data,b)})},f=function(){a.get("/favorites").then(function(a){angular.copy(a.data,b)})},g=function(){a.get("/borrowed").then(function(a){c.curr=a.data.filter(function(a){return a.status===!0}),c.past=a.data.filter(function(a){return a.status===!1})})},h=function(){a.get("/lent").then(function(a){c.curr=a.data.filter(function(a){return a.status===!0}),c.past=a.data.filter(function(a){return a.status===!1})})};return{key:{title:"value"},getLibrary:d,getWishlist:e,getBorrowedList:g,getLentList:h,getFavoritesList:f,data:b,borrowLentData:c}}]);